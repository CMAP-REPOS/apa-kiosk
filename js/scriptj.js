var App={init:function(){$("#main").load("home.html",function(){var e="home";$(this).addClass(e)});$(document).on("click","#main-nav li:not(.play-video,.pause-video,.action) a, #header a",App.loadMainPages);$(document).on("click","#main.project-list .primary li a, .secondary a.more, .secondary a.back",App.loadMainPages);$(document).on("click","#main.individuals-taking-action .primary li a",App.loadMainPages);$(document).on("click",".play-video, .pause-video",App.playPauseBtn);$(document).on("click","video",App.videoClicked);$(document).on("click",".supporting-sustainable-local-food-2 .cycles-diagram li",App.cycleDiagram);$(document).on("click",".supporting-sustainable-local-food-3 .secondary li a",App.cycleCharts);$(document).on("click",".managing-congestion .phases a",App.congestionPhases);$(document).on("click",".managing-congestion-2 .areas a",App.congestionAreas);$(document).on("click",".action a",function(e){e.preventDefault();var t=$("#action h3").html();$("#action h3").hide();$("#action").dialog({width:500,height:290,show:"fade",hide:"fade",modal:!0,title:t,draggable:!1,open:function(){$(".ui-dialog-titlebar-close").html("X")}})})},loadMainPages:function(e){e.preventDefault();var t=$(this).attr("href"),n=t.replace(".html","");$("#main").load(t,function(){$("#main").attr("class","");$("#main").addClass(n);history.pushState(null,null,t);n==="supporting-sustainable-local-food-2"&&App.cyclePhases();n==="project-list"||n==="individuals-taking-action"||n==="supporting-sustainable-local-food-2"||n==="supporting-sustainable-local-food-3"||n==="managing-congestion"||n==="managing-congestion-2"?$(".play-video a").removeClass("active").addClass("disabled"):$(".play-video a").removeClass("disabled").addClass("active")});$(".pause-video").removeClass("active").addClass("inactive");$(".play-video").addClass("active").removeClass("inactive")},playPauseBtn:function(e){e.preventDefault();if($(this).children("a").hasClass("disabled"))return!1;if($(".play-video").hasClass("active")){$(".play-video").removeClass("active").addClass("inactive");$(".pause-video").addClass("active").removeClass("inactive");$(".primary video")[0].play()}else{$(".pause-video").removeClass("active").addClass("inactive");$(".play-video").addClass("active").removeClass("inactive");$(".primary video")[0].pause()}},videoClicked:function(){if($(".primary video")[0].paused===!0){$(".play-video").removeClass("active").addClass("inactive");$(".pause-video").addClass("active").removeClass("inactive")}else{$(".pause-video").removeClass("active").addClass("inactive");$(".play-video").addClass("active").removeClass("inactive")}},cycleDiagram:function(e){e.preventDefault();var t=$(this),n=t.index();t.parent().children().removeClass("active");t.addClass("active");$(".cycles li").removeClass("active");$(".cycles li").eq(n).addClass("active");$(".cycles").parent().children("h1,p").hide()},cycleCharts:function(e){e.preventDefault();var t=$(this),n=t.parent().index();t.parents().eq(1).children().removeClass("active");t.parent().addClass("active");$(".supporting-sustainable-local-food-3 .primary li").removeClass("active");$(".supporting-sustainable-local-food-3 .primary li").eq(n).addClass("active")},cyclePhases:function(){function e(){$.each($(".cycles-diagram li"),function(e){setTimeout(function(){$(".cycles-diagram li").eq(e).removeClass("active")},e*200)})}if($("#main").hasClass("supporting-sustainable-local-food-2")){$.each($(".cycles-diagram li"),function(e){setTimeout(function(){$(".cycles-diagram li").eq(e).addClass("active")},e*200)});setTimeout(function(){e()},1e3)}},congestionPhases:function(e){e.preventDefault();var t=$(this).parent().index();$(".managing-congestion").css({backgroundImage:"url(img/bg-congestion"+(t+1)+".jpg)"});$(".phases-description li").fadeOut();$(".phases-description li").eq(t).fadeIn();$(this).parents().eq(1).children().removeClass("engaged");$(this).parent().addClass("engaged")},congestionAreas:function(e){e.preventDefault();var t=$(this).parent().index();$(".description li").fadeOut();$(".description li").eq(t).fadeIn();$(this).parents().eq(1).children().removeClass("engaged");$(this).parent().addClass("engaged")}};$(function(){App.init()});